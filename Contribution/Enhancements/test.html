<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Reveal.js + Custom Code Playground Slide</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">

  <!-- Reveal.js via CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/black.min.css" id="theme">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/monokai.min.css">

  <style>
    .playground {
      display: grid; gap: 10px;
      grid-template-columns: 1fr 1fr;
      align-items: start;
    }
    .pg-editor { display: grid; gap: 8px; }
    .pg-editor textarea {
      width: 100%; height: 320px;
      font: 14px/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      color: #e6e6e6; background: #1e1e1e;
      border: 1px solid #333; border-radius: 10px;
      padding: 10px; resize: vertical;
    }
    .pg-toolbar { display: flex; gap: 8px; align-items: center; }
    .pg-toolbar button {
      border: 1px solid #444; background: #2b2b2b; color: #eee;
      padding: 6px 10px; border-radius: 8px; cursor: pointer;
    }
    .pg-toolbar button:hover { background: #383838; }
    .pg-status { margin-left: auto; font-size: 12px; opacity: .8; }
    .pg-output {
      width: 100%; height: 340px; border: 1px solid #444;
      border-radius: 10px; background: #fff;
    }
    .pg-fragment-preview { font-size: 12px; opacity: .8; }
  </style>
</head>
<body>
  <div class="reveal">
    <div class="slides">

      <!-- Playground slide with updated initial code template -->
      <section data-playground>
        <h2>Live Code Playground</h2>
        <p class="pg-fragment-preview">Click <b>Run ▶</b>, then click the button inside the preview.</p>

        <!-- Initial code template (pure HTML/CSS/JS) -->
        <script type="text/plain" data-initial>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spinning Color Button</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { height: 100%; margin: 0; }
    body { display: grid; place-items: center; background: #f4f4f4; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    #magicBtn {
      padding: 20px 40px;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      background: #444;
      color: white;
      cursor: pointer;
      transition: transform 0.6s ease, background-color 0.4s ease;
      will-change: transform, background-color;
    }
    .spin { transform: rotate(360deg); }
  </style>
</head>
<body>
  <button id="magicBtn">Click Me!</button>
  <script>
    (function () {
      const btn = document.getElementById('magicBtn');
      const colors = ["#03a9f4", "#e91e63", "#4caf50", "#ff9800", "#9c27b0", "#2196f3", "#795548"];
      let last = -1;
      btn.addEventListener('click', () => {
        btn.classList.add('spin');
        let idx; do { idx = Math.floor(Math.random() * colors.length); } while (idx === last);
        last = idx;
        btn.style.backgroundColor = colors[idx];
        btn.textContent = 'Color: ' + colors[idx];
        setTimeout(() => btn.classList.remove('spin'), 600);
      });
    })();
  </script>
</body>
</html>
        </script>

      </section>

      <section>
        <h2>Regular Slide</h2>
        <p>You can add more slides as needed.</p>
      </section>

    </div>
  </div>

  <!-- Reveal.js scripts via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/notes/notes.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/markdown/markdown.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/highlight/highlight.min.js"></script>

  <script>
    // Tiny Playground plugin
    (function () {
      function qs(el, sel) { return el.querySelector(sel); }
      function qsa(el, sel) { return Array.from(el.querySelectorAll(sel)); }

      function buildPlayground(section) {
        const wrap = document.createElement('div');
        wrap.className = 'playground';

        const editor = document.createElement('div');
        editor.className = 'pg-editor';

        const ta = document.createElement('textarea');
        ta.setAttribute('spellcheck', 'false');

        const toolbar = document.createElement('div');
        toolbar.className = 'pg-toolbar';

        const runBtn   = document.createElement('button'); runBtn.textContent = 'Run ▶';
        const resetBtn = document.createElement('button'); resetBtn.textContent = 'Reset ⟲';
        const status   = document.createElement('span');   status.className = 'pg-status'; status.textContent = 'idle';

        toolbar.append(runBtn, resetBtn, status);
        editor.append(ta, toolbar);

        const iframe = document.createElement('iframe');
        iframe.className = 'pg-output';
        iframe.title = 'Playground Output';
        iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin');

        wrap.append(editor, iframe);
        section.append(wrap);

        const initial = qs(section, 'script[type="text/plain"][data-initial]');
        const baseDoc = (initial && initial.textContent) ? initial.textContent.trim() : '<!doctype html><title>Empty</title>';
        ta.value = baseDoc;

        function run() {
          status.textContent = 'running…';
          iframe.srcdoc = ta.value;
          setTimeout(() => status.textContent = 'ok', 80);
        }

        function reset() {
          ta.value = baseDoc;
          run();
        }

        runBtn.addEventListener('click', run);
        resetBtn.addEventListener('click', reset);

        run(); // autorun once on load
      }

      function initAll() { qsa(document, 'section[data-playground]').forEach(buildPlayground); }

      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        setTimeout(initAll, 0);
      } else {
        document.addEventListener('DOMContentLoaded', initAll);
      }
    })();

    Reveal.initialize({
      controls: true,
      progress: true,
      slideNumber: 'c/t',
      hash: true,
      plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
    });
  </script>
</body>
</html>
